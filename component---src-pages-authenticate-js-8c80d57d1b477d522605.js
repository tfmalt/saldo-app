(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(147),i=a(146),l=a(160),c=a.n(l),o=(a(151),a(161)),u=a.n(o),d=a(34),h=a.n(d),m=a(7),p=a.n(m),g=a(162),f=a(163),v=a(178),w=a.n(v),b=function(){return r.a.createElement("div",{className:w.a.wrapper},r.a.createElement("div",{className:w.a.spinner}))},E=a(179),S=a.n(E),y=function(e){function t(t){var a;a=e.call(this,t)||this;var n="undefined"==typeof window?{userId:"",secret:""}:JSON.parse(localStorage.getItem("sd60:authenticate"));return a.state={userId:null===n?"":n.userId,secret:null===n?"":n.secret,isWaiting:!1},a.handleSubmit=a.handleSubmit.bind(h()(a)),a.handleChange=a.handleChange.bind(h()(a)),a}p()(t,e);var a=t.prototype;return a.handleSubmit=function(){var e=u()(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Got a submit! "+this.state.userId),t.preventDefault(),this.setState({isWaiting:!0}),e.next=5,fetch(g.a.token,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"client_credentials",client_id:this.state.userId,client_secret:this.state.secret})});case 5:return a=e.sent,console.log("Got res:",a.status,a.statusText),e.next=9,a.json();case 9:if(n=e.sent,this.setState({isWaiting:!1}),400!==a.status){e.next=14;break}return console.log("Got wrong auth:",n),e.abrupt("return");case 14:if(!a.ok){e.next=21;break}if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("expires_in")){e.next=18;break}throw console.warn(n),new Error("Something is not right with the access_token Response.");case 18:return n.date=new Date,"undefined"!=typeof window&&(localStorage.setItem("sd60:token",JSON.stringify(n)),localStorage.setItem("sd60:authenticate",JSON.stringify({success:!0,userId:this.state.userId,secret:this.state.secret}))),e.abrupt("return",Object(f.a)("/"));case 21:throw new Error("Got an invalid response. "+a.statusText);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)},a.render=function(){var e=this.state.isWaiting;return r.a.createElement("div",{id:"wrapper"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"textfield"},r.a.createElement("input",{type:"text",required:!0,value:this.state.userId,onChange:this.handleChange,id:"userId"}),r.a.createElement("div",{id:"underline"}),r.a.createElement("label",null,"Bruker id")),r.a.createElement("div",{className:"textfield"},r.a.createElement("input",{type:"text",required:!0,value:this.state.secret,onChange:this.handleChange,id:"secret"}),r.a.createElement("div",{id:"underline"}),r.a.createElement("label",null,"Passord")),r.a.createElement("button",{className:S.a.authenticate,type:"submit",id:"authenticate"},r.a.createElement("div",{className:e?S.a.hidden:S.a.visible},"Logg inn"),r.a.createElement("div",{className:e?S.a.visible:S.a.hidden},r.a.createElement(b,null)))))},t}(r.a.Component);t.default=function(){return r.a.createElement(s.a,{headerTitle:"Saldo - Logg inn"},r.a.createElement(i.a,{title:"Authenticate"}),r.a.createElement(y,null))}}}]);
//# sourceMappingURL=component---src-pages-authenticate-js-8c80d57d1b477d522605.js.map